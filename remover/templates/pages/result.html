{% extends "layout/layout.html" %}
{% block title %}Hasil{% endblock %}
{% load static %}

{% block content %}
<div class="py-12 px-4 sm:px-6 lg:px-8 mt-[3vh]">
    <div class="max-w-4xl mx-auto">
        <div class="bg-white shadow-xl rounded-lg overflow-hidden">
            <div class="bg-gradient-to-r from-blue-500 to-indigo-600 p-6">
                <h2 class="text-3xl font-bold text-white text-center">Background Removed</h2>
            </div>

            <div class="p-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="text-lg font-semibold mb-2 text-gray-700">Original Image</h3>
                        <div class="border-4 border-gray-200 rounded-lg overflow-hidden">
                            <img src="{{ original_image }}" alt="Original image" class="w-full h-auto">
                        </div>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold mb-2 text-gray-700">Processed Image</h3>
                        <div class="border-4 border-gray-200 rounded-lg overflow-hidden bg-gray-100">
                            <img src="{{ output_image }}" alt="Image with background removed" class="w-full h-auto">
                        </div>
                    </div>
                </div>

                <div class="mt-8">
                    <h3 class="text-lg font-semibold mb-4 text-gray-700">Download Options</h3>
                    <div class="flex flex-wrap gap-4">
                        <select id="formatSelect"
                            class="bg-white border border-gray-300 rounded-md text-gray-700 py-2 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="">Select format</option>
                            <option value="jpeg">JPEG</option>
                            <option value="jpg">JPG</option>
                            <option value="png">PNG</option>
                            <option value="webp">WebP</option>
                        </select>
                        <button onclick="downloadImage()"
                            class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-md transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50">
                            Download Processed Image
                        </button>
                    </div>
                </div>
            </div>

            <div class="bg-gray-50 px-6 py-4">
                <a href="{% url 'home' %}" class="inline-flex items-center text-blue-600 hover:text-blue-800">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                    </svg>
                    Remove Another Image
                </a>
            </div>
        </div>
    </div>
</div>

<script>
    function downloadImage() {
        const format = document.getElementById('formatSelect').value;
        if (format) {
            window.location.href = "{% url 'download' format='placeholder' %}".replace('placeholder', format);
        } else {
            alert('Please select a format');
        }
    }
</script>
{% endblock %}